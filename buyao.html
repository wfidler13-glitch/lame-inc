<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GVZQ50F49X"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-GVZQ50F49X');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DO NOT TRANSLATE</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@700;900&display=swap');

        body {
            /* Unified Theme: White BG, Barlow Condensed, Black Text */
            font-family: 'Barlow Condensed', sans-serif;
            background-color: #ffffff; 
            color: #000000;
            overflow: hidden; 
            user-select: none;
        }
        
        /* Chinese characters need the specific font */
        .chinese-text {
            font-family: 'Noto Sans SC', sans-serif;
        }

        .puzzle-container {
            position: relative;
            width: 80vmin; 
            height: 80vmin;
            max-width: 500px;
            max-height: 500px;
        }
        .animal-icon {
            position: absolute;
            cursor: pointer;
            transition: transform 0.15s ease-out;
        }
        .animal-icon:hover {
            transform: scale(1.1);
            filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.2)); 
        }
        .animal-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            user-select: none;
            -webkit-user-drag: none;
        }
        
        /* Spotify Phase Styles - Updated to Black */
        .spotify-logo {
            fill: #000000; /* Black Fill */
            transition: transform 0.2s;
            cursor: pointer;
        }
        .spotify-logo:hover {
            transform: scale(1.1);
            filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.5));
        }
    </style>
</head>
<body class="select-none">

    <div id="app" class="min-h-screen flex flex-col items-center justify-center p-4 relative">
        
        <!-- Main Instructions -->
        <div id="initial-instruction" class="text-center mb-16 w-full">
            <h1 class="text-6xl sm:text-8xl font-black tracking-tighter uppercase mb-4 text-black">
                DO NOT TRANSLATE
            </h1>
            <p class="chinese-text text-3xl sm:text-5xl font-black text-black" style="letter-spacing: 0.1em;">
                不要点击红龙
            </p>
        </div>

        <!-- Zodiac Circle Puzzle Container -->
        <div id="puzzle-container" class="puzzle-container">
            <!-- Icons will be generated by JavaScript -->
        </div>

    </div>

    <script>
        // --- Configuration ---
        const SPOTIFY_URL = "https://open.spotify.com/playlist/3LaHRpbqb31CV6AmXd9dtT?si=oos6i8I_THS_8uq5WLXrHw&pi=gyzPDjfQT6iH7";
        const WRONG_IMAGE_FOLDER = "./BUYAOimgs/"; 
        
        const animals = [
            { name: 'rat', file: 'buyaorat.png', isTarget: false },
            { name: 'ox', file: 'buyaoox.png', isTarget: false },
            { name: 'tiger', file: 'buyaotiger.png', isTarget: false },
            { name: 'rabbit', file: 'buyaorabbit.png', isTarget: false },
            { name: 'dragon', file: 'buyaodragon.png', isTarget: true }, 
            { name: 'snake', file: 'buyaosnake.png', isTarget: false },
            { name: 'horse', file: 'buyaohorse.png', isTarget: false },
            { name: 'goat', file: 'buyaogoat.png', isTarget: false },
            { name: 'monkey', file: 'buyaomonkey.png', isTarget: false },
            { name: 'rooster', file: 'buyaorooster.png', isTarget: false },
            { name: 'dog', file: 'buyaodog.png', isTarget: false },
            { name: 'pig', file: 'buyaopig.png', isTarget: false },
        ];

        // --- Core Functions ---

        function closeWindow() {
            try {
                window.open('', '_self').close();
            } catch (e) {
                setTimeout(() => { window.location.href = "about:blank"; }, 100);
            }
        }

        function handleIconClick(isTarget) {
            document.querySelectorAll('.animal-icon').forEach(icon => {
                icon.style.pointerEvents = 'none';
            });

            if (isTarget) {
                renderSpotifyFace();
            } else {
                const app = document.getElementById('app');
                app.innerHTML = ''; 
                
                // Unified Theme: White background for failure screen
                const msgContainer = document.createElement('div');
                msgContainer.className = "absolute inset-0 flex items-center justify-center bg-white z-50";
                
                const msg = document.createElement('div');
                msg.className = "text-black text-6xl sm:text-8xl font-black animate-pulse text-center";
                msg.innerText = "THANK YOU.";
                
                msgContainer.appendChild(msg);
                document.body.appendChild(msgContainer);

                setTimeout(closeWindow, 1000);
            }
        }

        function renderSpotifyFace() {
            const app = document.getElementById('app');
            app.innerHTML = '';
            app.className = "min-h-screen flex flex-col items-center justify-center p-4 w-full bg-white";

            const container = document.createElement('div');
            container.className = "flex flex-col items-center justify-center animate-fadeIn w-full max-w-2xl";

            // Updated to Black
            const header = document.createElement('h1');
            header.className = "text-5xl sm:text-7xl font-black tracking-tighter uppercase mb-16 text-black text-center leading-tight"; 
            header.innerText = "DO NOT OPEN SPOTIFY";
            container.appendChild(header);

            const faceDiv = document.createElement('div');
            faceDiv.className = "flex flex-col items-center";

            const eyesDiv = document.createElement('div');
            eyesDiv.className = "flex gap-8 sm:gap-16 mb-8 justify-center";

            const spotifySvg = `
                <svg viewBox="0 0 24 24" width="100" height="100" class="spotify-logo w-24 h-24 sm:w-32 sm:h-32">
                    <path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.26.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-.96 15.18 1.381.54.3.72 1.02.42 1.56-.3.54-1.02.72-1.56.42z"/>
                </svg>
            `;

            const leftEye = document.createElement('div');
            leftEye.innerHTML = spotifySvg;
            leftEye.addEventListener('click', () => window.location.href = SPOTIFY_URL);
            eyesDiv.appendChild(leftEye);

            const rightEye = document.createElement('div');
            rightEye.innerHTML = spotifySvg;
            rightEye.addEventListener('click', () => window.location.href = SPOTIFY_URL);
            eyesDiv.appendChild(rightEye);

            faceDiv.appendChild(eyesDiv);

            // Smile Border Updated to Black
            const smile = document.createElement('div');
            smile.className = "w-32 h-16 sm:w-48 sm:h-24 border-b-[8px] sm:border-b-[12px] border-black rounded-full";
            faceDiv.appendChild(smile);

            container.appendChild(faceDiv);
            app.appendChild(container);
        }

        function renderPuzzle() {
            const container = document.getElementById('puzzle-container');
            if (!container) return;

            const numAnimals = animals.length;
            const angleStep = 360 / numAnimals;
            const radius = container.clientWidth / 2; 
            const iconSize = window.innerWidth < 640 ? 40 : 60; 

            animals.forEach((animal, index) => {
                const angle = index * angleStep;
                const radians = angle * (Math.PI / 180);
                const x = radius * Math.sin(radians);
                const y = radius * -Math.cos(radians);
                
                const iconDiv = document.createElement('div');
                iconDiv.className = 'animal-icon';
                iconDiv.style.width = `${iconSize}px`;
                iconDiv.style.height = `${iconSize}px`;
                iconDiv.style.left = `calc(50% + ${x}px - ${iconSize/2}px)`;
                iconDiv.style.top = `calc(50% + ${y}px - ${iconSize/2}px)`;

                iconDiv.innerHTML = `<img src="${WRONG_IMAGE_FOLDER}${animal.file}" alt="${animal.name} icon" 
                                        onerror="this.src='https://placehold.co/${iconSize}x${iconSize}/4a4a4a/f3f4f6?text=${animal.name.toUpperCase()}';">`;
                
                iconDiv.addEventListener('click', () => handleIconClick(animal.isTarget));
                
                container.appendChild(iconDiv);
            });
        }

        window.addEventListener('load', renderPuzzle);
        window.addEventListener('resize', renderPuzzle);
        
    </script>
</body>
</html>