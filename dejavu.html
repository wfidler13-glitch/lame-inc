<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GVZQ50F49X"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-GVZQ50F49X');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DO NOT TRANSLATE</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@700;900&display=swap');

        body {
            /* Unified Theme: White BG, Black Text */
            font-family: 'Barlow Condensed', sans-serif;
            background-color: #ffffff; 
            color: #000000;
            overflow: hidden; 
        }

        .chinese-text {
            font-family: 'Noto Sans SC', sans-serif;
        }

        .puzzle-container {
            position: relative;
            width: 80vmin; 
            height: 80vmin;
            max-width: 500px;
            max-height: 500px;
        }
        .animal-icon {
            position: absolute;
            cursor: pointer;
            transition: transform 0.15s ease-out;
        }
        .animal-icon:hover {
            transform: scale(1.1);
            filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.2));
        }
        .animal-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            user-select: none;
            -webkit-user-drag: none;
        }

        /* Custom Input Styling */
        .year-input {
            background: transparent;
            border-bottom: 4px solid #000000; /* Black underline */
            color: #000000; /* Black text input */
            font-family: 'Barlow Condensed', sans-serif;
            font-size: 3rem;
            text-align: center;
            outline: none;
            width: 200px;
            letter-spacing: 0.1em;
        }
        .year-input:focus {
            border-bottom-color: #333333;
        }
    </style>
</head>
<body class="select-none">

    <div id="app" class="min-h-screen flex flex-col items-center justify-center p-4">
        
        <!-- Main Instructions -->
        <div id="initial-instruction" class="text-center mb-16 transition-opacity duration-500">
            <h1 class="text-6xl sm:text-8xl font-black tracking-tighter uppercase mb-4 text-black">
                DO NOT TRANSLATE
            </h1>
            <p class="chinese-text text-3xl sm:text-5xl font-black text-black" style="letter-spacing: 0.1em;">
                不要点击猴子
            </p>
        </div>

        <!-- Zodiac Circle Puzzle Container -->
        <div id="puzzle-container" class="puzzle-container transition-opacity duration-500">
            <!-- Icons will be generated by JavaScript -->
        </div>

    </div>

    <script>
        // --- Configuration ---
        const FINAL_URL = "https://lameincorporated.com/donotwait";
        const WRONG_IMAGE_FOLDER = "./BUYAOimgs/"; 
        const TARGET_YEAR = "2020";

        const animals = [
            { name: 'rat', file: 'buyaorat.png', isTarget: false },
            { name: 'ox', file: 'buyaoox.png', isTarget: false },
            { name: 'tiger', file: 'buyaotiger.png', isTarget: false },
            { name: 'rabbit', file: 'buyaorabbit.png', isTarget: false },
            { name: 'dragon', file: 'buyaodragon.png', isTarget: false }, 
            { name: 'snake', file: 'buyaosnake.png', isTarget: false },
            { name: 'horse', file: 'buyaohorse.png', isTarget: false },
            { name: 'goat', file: 'buyaogoat.png', isTarget: false },
            { name: 'monkey', file: 'buyaomonkey.png', isTarget: true }, 
            { name: 'rooster', file: 'buyaorooster.png', isTarget: false },
            { name: 'dog', file: 'buyaodog.png', isTarget: false },
            { name: 'pig', file: 'buyaopig.png', isTarget: false },
        ];

        // --- Core Functions ---

        function closeWindow() {
            try {
                window.open('', '_self').close();
            } catch (e) {
                setTimeout(() => { window.location.href = "about:blank"; }, 100);
            }
        }

        function triggerFail() {
            const app = document.getElementById('app');
            app.innerHTML = '';
            
            // Unified Theme: White BG for failure
            const msgContainer = document.createElement('div');
            msgContainer.className = "absolute inset-0 flex items-center justify-center bg-white z-50";

            const msg = document.createElement('div');
            msg.className = "text-black text-6xl sm:text-8xl font-black animate-pulse text-center";
            msg.innerText = "THANK YOU.";
            
            msgContainer.appendChild(msg);
            app.appendChild(msgContainer);

            setTimeout(closeWindow, 1000);
        }

        function handleIconClick(isTarget) {
            document.querySelectorAll('.animal-icon').forEach(icon => {
                icon.style.pointerEvents = 'none';
            });

            if (isTarget) {
                renderPhaseTwo();
            } else {
                triggerFail();
            }
        }

        function renderPhaseTwo() {
            const app = document.getElementById('app');
            
            document.getElementById('initial-instruction').style.opacity = '0';
            document.getElementById('puzzle-container').style.opacity = '0';

            setTimeout(() => {
                app.innerHTML = ''; 

                const container = document.createElement('div');
                container.className = "flex flex-col items-center justify-center max-w-2xl text-center px-4 animate-fadeIn w-full";

                const riddle = document.createElement('p');
                riddle.className = "text-3xl sm:text-5xl font-black text-black mb-12 uppercase leading-tight";
                riddle.innerHTML = "You pressed a color previously.<br>Do not enter the year that color was 'color of the year'";
                
                const input = document.createElement('input');
                input.type = "text";
                input.maxLength = 4;
                input.className = "year-input mb-8";
                input.placeholder = "YYYY";
                input.autofocus = true;

                // Button updated to black
                const button = document.createElement('button');
                button.className = "px-8 py-3 bg-black hover:bg-gray-800 text-white font-bold rounded text-xl transition-colors uppercase tracking-widest";
                button.innerText = "Submit";
                button.onclick = () => validateYear(input.value);

                input.addEventListener('keypress', function (e) {
                    if (e.key === 'Enter') {
                        validateYear(input.value);
                    }
                });

                container.appendChild(riddle);
                container.appendChild(input);
                container.appendChild(button);
                app.appendChild(container);

                input.focus();
            }, 500);
        }

        function validateYear(value) {
            if (value === TARGET_YEAR) {
                window.location.href = FINAL_URL;
            } else {
                triggerFail();
            }
        }

        function renderPuzzle() {
            const container = document.getElementById('puzzle-container');
            if (!container) return;

            const numAnimals = animals.length;
            const angleStep = 360 / numAnimals;
            const radius = container.clientWidth / 2; 
            const iconSize = window.innerWidth < 640 ? 40 : 60; 

            animals.forEach((animal, index) => {
                const angle = index * angleStep;
                const radians = angle * (Math.PI / 180);
                const x = radius * Math.sin(radians);
                const y = radius * -Math.cos(radians);
                
                const iconDiv = document.createElement('div');
                iconDiv.className = 'animal-icon';
                iconDiv.style.width = `${iconSize}px`;
                iconDiv.style.height = `${iconSize}px`;
                iconDiv.style.left = `calc(50% + ${x}px - ${iconSize/2}px)`;
                iconDiv.style.top = `calc(50% + ${y}px - ${iconSize/2}px)`;

                iconDiv.innerHTML = `<img src="${WRONG_IMAGE_FOLDER}${animal.file}" alt="${animal.name} icon" 
                                        onerror="this.src='https://placehold.co/${iconSize}x${iconSize}/4a4a4a/f3f4f6?text=${animal.name.toUpperCase()}';">`;
                
                iconDiv.addEventListener('click', () => handleIconClick(animal.isTarget));
                
                container.appendChild(iconDiv);
            });
        }

        window.addEventListener('load', renderPuzzle);
        window.addEventListener('resize', renderPuzzle);
        
    </script>
</body>
</html>