<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GVZQ50F49X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-GVZQ50F49X');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DO NOT TRANSLATE</title>
    <!-- Load Tailwind CSS for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@700;900&display=swap');

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #111827; /* Dark charcoal background */
            color: #f3f4f6; /* Light gray text */
            overflow: hidden; /* Prevent scrolling */
        }
        .puzzle-container {
            position: relative;
            /* Defines the size of the circular area for the images */
            width: 80vmin; 
            height: 80vmin;
            max-width: 500px;
            max-height: 500px;
        }
        .animal-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform-origin: 0 100%; /* Pivot point for circular rotation */
            width: 60px; /* Size of the image/icon container */
            height: 60px;
            margin-left: -30px; /* Center horizontally */
            margin-top: -30px; /* Center vertically (adjusted in JS) */
            cursor: pointer;
            transition: transform 0.15s ease-out;
        }
        .animal-icon:hover {
            transform: scale(1.1);
            filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.5));
        }
        .animal-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            user-select: none;
            -webkit-user-drag: none;
        }

        /* Custom Input Styling for Phase 2 */
        .year-input {
            background: transparent;
            border-bottom: 4px solid #ef4444;
            color: white;
            font-family: 'Barlow Condensed', sans-serif;
            font-size: 3rem;
            text-align: center;
            outline: none;
            width: 200px;
            letter-spacing: 0.1em;
        }
        .year-input:focus {
            border-bottom-color: white;
        }
    </style>
</head>
<body class="select-none">

    <div id="app" class="min-h-screen flex flex-col items-center justify-center p-4">
        
        <!-- Main Instructions (Initial Phase) -->
        <div id="initial-instruction" class="text-center mb-16 transition-opacity duration-500">
            <h1 class="text-4xl sm:text-6xl font-extrabold tracking-widest uppercase mb-4 text-red-500" style="font-family: 'Barlow Condensed', sans-serif;">
                DO NOT TRANSLATE
            </h1>
            <p class="text-2xl sm:text-4xl font-black text-white" style="letter-spacing: 0.1em;">
                不要点击猴子
            </p>
        </div>

        <!-- Zodiac Circle Puzzle Container -->
        <div id="puzzle-container" class="puzzle-container transition-opacity duration-500">
            <!-- Icons will be generated by JavaScript -->
        </div>

    </div>

    <script>
        // --- Configuration ---
        const FINAL_URL = "https://lameincorporated.com/donotwait";
        const WRONG_IMAGE_FOLDER = "./BUYAOimgs/"; 
        const TARGET_YEAR = "2020";

        // List of animals in the required circular order
        // NOTE: Monkey is now true, Dragon is false
        const animals = [
            { name: 'rat', file: 'buyaorat.png', isTarget: false },
            { name: 'ox', file: 'buyaoox.png', isTarget: false },
            { name: 'tiger', file: 'buyaotiger.png', isTarget: false },
            { name: 'rabbit', file: 'buyaorabbit.png', isTarget: false },
            { name: 'dragon', file: 'buyaodragon.png', isTarget: false }, 
            { name: 'snake', file: 'buyaosnake.png', isTarget: false },
            { name: 'horse', file: 'buyaohorse.png', isTarget: false },
            { name: 'goat', file: 'buyaogoat.png', isTarget: false },
            { name: 'monkey', file: 'buyaomonkey.png', isTarget: true }, // The new target!
            { name: 'rooster', file: 'buyaorooster.png', isTarget: false },
            { name: 'dog', file: 'buyaodog.png', isTarget: false },
            { name: 'pig', file: 'buyaopig.png', isTarget: false },
        ];

        // --- Core Functions ---

        /**
         * Closes the window/tab with a fallback.
         */
        function closeWindow() {
            try {
                window.open('', '_self').close();
            } catch (e) {
                // Workaround for blocked close()
                setTimeout(() => { window.location.href = "about:blank"; }, 100);
            }
        }

        /**
         * Triggers failure state
         */
        function triggerFail() {
            const app = document.getElementById('app');
            app.innerHTML = '';
            
            const msg = document.createElement('div');
            msg.className = "text-red-500 text-6xl font-black animate-pulse text-center";
            msg.style.fontFamily = "'Barlow Condensed', sans-serif";
            msg.innerText = "THANK YOU.";
            app.appendChild(msg);

            setTimeout(closeWindow, 1000);
        }

        /**
         * Handles the click on any of the animal icons.
         */
        function handleIconClick(isTarget) {
            // Disable all clicks
            document.querySelectorAll('.animal-icon').forEach(icon => {
                icon.style.pointerEvents = 'none';
            });

            if (isTarget) {
                // Success Phase 1: Go to Phase 2 (Riddle)
                renderPhaseTwo();
            } else {
                // Failure
                triggerFail();
            }
        }

        /**
         * Renders Phase 2: The Year Riddle
         */
        function renderPhaseTwo() {
            const app = document.getElementById('app');
            
            // Fade out existing content nicely
            document.getElementById('initial-instruction').style.opacity = '0';
            document.getElementById('puzzle-container').style.opacity = '0';

            setTimeout(() => {
                app.innerHTML = ''; // Clear DOM

                const container = document.createElement('div');
                container.className = "flex flex-col items-center justify-center max-w-2xl text-center px-4 animate-fadeIn";

                const riddle = document.createElement('p');
                riddle.className = "text-3xl sm:text-5xl font-bold text-white mb-12 uppercase leading-tight";
                riddle.style.fontFamily = "'Barlow Condensed', sans-serif";
                riddle.innerHTML = "You pressed a color previously.<br>Do not enter the year that color was 'color of the year'";
                
                const input = document.createElement('input');
                input.type = "text";
                input.maxLength = 4;
                input.className = "year-input mb-8";
                input.placeholder = "YYYY";
                input.autofocus = true;

                const button = document.createElement('button');
                button.className = "px-8 py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded text-xl transition-colors uppercase";
                button.innerText = "Submit";
                button.onclick = () => validateYear(input.value);

                // Add enter key support
                input.addEventListener('keypress', function (e) {
                    if (e.key === 'Enter') {
                        validateYear(input.value);
                    }
                });

                container.appendChild(riddle);
                container.appendChild(input);
                container.appendChild(button);
                app.appendChild(container);

                // Auto focus input
                input.focus();
            }, 500);
        }

        /**
         * Validates the year input
         */
        function validateYear(value) {
            if (value === TARGET_YEAR) {
                window.location.href = FINAL_URL;
            } else {
                triggerFail();
            }
        }

        /**
         * Renders the zodiac icons in a circle.
         */
        function renderPuzzle() {
            const container = document.getElementById('puzzle-container');
            if (!container) return;

            const numAnimals = animals.length;
            const angleStep = 360 / numAnimals;
            const radius = container.clientWidth / 2; 
            const iconSize = window.innerWidth < 640 ? 40 : 60; 

            animals.forEach((animal, index) => {
                const angle = index * angleStep;
                const radians = angle * (Math.PI / 180);
                const x = radius * Math.sin(radians);
                const y = radius * -Math.cos(radians);
                
                const iconDiv = document.createElement('div');
                iconDiv.className = 'animal-icon';
                iconDiv.style.width = `${iconSize}px`;
                iconDiv.style.height = `${iconSize}px`;
                iconDiv.style.left = `calc(50% + ${x}px - ${iconSize/2}px)`;
                iconDiv.style.top = `calc(50% + ${y}px - ${iconSize/2}px)`;

                iconDiv.innerHTML = `<img src="${WRONG_IMAGE_FOLDER}${animal.file}" alt="${animal.name} icon" 
                                        onerror="this.src='https://placehold.co/${iconSize}x${iconSize}/4a4a4a/f3f4f6?text=${animal.name.toUpperCase()}';">`;
                
                iconDiv.addEventListener('click', () => handleIconClick(animal.isTarget));
                
                container.appendChild(iconDiv);
            });
        }

        window.addEventListener('load', renderPuzzle);
        window.addEventListener('resize', renderPuzzle);
        
    </script>
</body>
</html>