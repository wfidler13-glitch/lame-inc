<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GVZQ50F49X"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-GVZQ50F49X');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DO NOT CLICK THE PALINDROME</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@700;900&display=swap');
        
        body {
            /* Unified Theme: White BG, Black Text */
            font-family: 'Barlow Condensed', sans-serif;
            background-color: #ffffff; 
            color: #000000;
            user-select: none;
        }

        .puzzle-image {
            cursor: pointer;
            transition: transform 0.2s, filter 0.2s;
            object-fit: cover; 
            height: 200px; /* Reset to original larger size */
            width: 200px; 
            border-radius: 0.75rem; /* Rounded corners */
        }

        .puzzle-image:hover {
            transform: scale(1.05);
            filter: drop-shadow(0 10px 8px rgba(0, 0, 0, 0.1));
        }

        .puzzle-image:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body>

    <div id="app" class="min-h-screen flex flex-col items-center justify-center p-4">
        
        <!-- Header Instruction -->
        <h1 id="instruction-text" class="text-6xl sm:text-8xl font-black mb-16 tracking-tighter uppercase text-center text-black leading-none">
            DO NOT CLICK THE PALINDROME
        </h1>

        <!-- Image Container - Flexible layout for 3 images -->
        <div id="game-area" class="flex flex-wrap items-center justify-center gap-8 sm:gap-16">
            <!-- Images will be injected here by JavaScript -->
        </div>

        <!-- Failure Message Container (Hidden by default) -->
        <div id="message-area" class="hidden mt-10">
            <h2 class="text-7xl sm:text-9xl font-black text-black">THANK YOU.</h2>
        </div>

    </div>

    <script>
        // --- Configuration ---
        const IMG_PATH = "./palindrome/";
        const FINAL_MESSAGE_NUMBER = "919-386-9148";

        // Define the stages of the game with the new image groups
        const levels = [
            {
                // Level 1: Target is racecar.png
                images: [
                    { file: "racecar.png", isTarget: true },
                    { file: "blimp.png", isTarget: false },
                    { file: "sub.png", isTarget: false }
                ]
            },
            {
                // Level 2: Target is mom.jpeg
                images: [
                    { file: "mom.jpeg", isTarget: true },
                    { file: "robot.png", isTarget: false },
                    { file: "banana.png", isTarget: false }
                ]
            },
            {
                // Level 3: Target is tacocat.png
                images: [
                    { file: "tacocat.png", isTarget: true },
                    { file: "squirrel.png", isTarget: false },
                    { file: "dog.png", isTarget: false }
                ]
            }
        ];

        let currentLevelIndex = 0; // Starts at 0 for Level 1
        const gameArea = document.getElementById('game-area');
        const instructionText = document.getElementById('instruction-text');
        const messageArea = document.getElementById('message-area');

        // --- Core Functions ---

        function closeWindow() {
            try {
                window.open('', '_self').close();
            } catch (e) {
                document.body.innerHTML = '<div class="min-h-screen flex items-center justify-center bg-white"><h1 class="text-8xl text-black font-black">THANK YOU.</h1></div>';
            }
        }

        function handleImageClick(isTarget) {
            if (isTarget) {
                // Correct choice - Proceed to next level
                currentLevelIndex++;
                
                if (currentLevelIndex < levels.length) {
                    renderLevel(currentLevelIndex);
                } else {
                    showFinalScreen();
                }
            } else {
                // Wrong choice - Fail
                failGame();
            }
        }

        function failGame() {
            gameArea.classList.add('hidden');
            instructionText.classList.add('hidden');
            messageArea.classList.remove('hidden');
            
            setTimeout(() => {
                closeWindow();
            }, 1500); 
        }

        function showFinalScreen() {
            gameArea.classList.add('hidden');
            instructionText.classList.add('hidden'); 

            const finalDiv = document.createElement('div');
            finalDiv.className = "text-center animate-pulse";
            finalDiv.innerHTML = `
                <h1 class="text-5xl sm:text-7xl font-black mb-6 uppercase text-black">
                    DO NOT TEXT THE WORD "LAME"
                </h1>
                <h2 class="text-6xl sm:text-9xl font-black text-black">
                    ${FINAL_MESSAGE_NUMBER}
                </h2>
            `;
            
            // Re-center on the final message
            const app = document.getElementById('app');
            app.innerHTML = '';
            app.classList.remove('flex-col'); // Ensure app container uses flex property for centering
            app.appendChild(finalDiv);
        }

        function renderLevel(index) {
            gameArea.innerHTML = ''; // Clear previous images
            
            const levelData = levels[index];
            // Shuffle the images in the current level for variety
            const shuffledImages = [...levelData.images].sort(() => Math.random() - 0.5);

            shuffledImages.forEach(imgData => {
                const container = document.createElement('div');
                container.className = 'flex items-center justify-center'; // Wrapper for consistency

                const img = document.createElement('img');
                img.src = `${IMG_PATH}${imgData.file}`;
                img.alt = imgData.file.split('.')[0];
                img.className = "puzzle-image shadow-xl";
                
                img.onerror = function() { 
                    this.src = `https://placehold.co/200x200/e5e7eb/000000?text=${imgData.file.split('.')[0].toUpperCase()}`; 
                };

                // Attach click handler to the image element
                img.addEventListener('click', () => handleImageClick(imgData.isTarget));
                
                container.appendChild(img);
                gameArea.appendChild(container);
            });
        }

        window.addEventListener('load', () => {
            renderLevel(currentLevelIndex);
        });

    </script>
</body>
</html>