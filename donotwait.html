<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GVZQ50F49X"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-GVZQ50F49X');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DO NOT WAIT</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@700;900&display=swap');
        
        body {
            /* Unified Theme: White BG, Black Text */
            font-family: 'Barlow Condensed', sans-serif;
            background-color: #ffffff; 
            color: #000000; 
            overflow: hidden; 
            user-select: none;
            touch-action: manipulation; 
        }

        /* Styles for the interactive text segments */
        .interactive-char {
            cursor: pointer;
            display: inline-block; /* Allows transform if needed */
            transition: color 0.1s;
        }
        
        /* On hover, maybe no change to keep it hard? 
           Or slight change? Let's keep it static to not give it away. 
        */
    </style>
</head>
<body>

    <div id="app" class="min-h-screen flex flex-col items-center justify-center p-4">
        
        <!-- Main Container for Game Elements -->
        <div id="game-container" class="text-center">
            
            <!-- Main Instruction Text -->
            <h1 id="main-text" class="text-8xl sm:text-9xl font-black mb-12 tracking-tighter uppercase select-none text-black leading-none">
                DO NOT WAIT
            </h1>
            
            <!-- The Countdown Timer -->
            <div id="timer-display" class="text-9xl font-black text-black select-none">
                404
            </div>
        </div>

        <!-- Failure Message Container -->
        <div id="message-area" class="hidden">
            <h2 class="text-7xl sm:text-9xl font-black text-black">THANK YOU.</h2>
        </div>

    </div>

    <script>
        // --- Configuration ---
        const SUCCESS_URL = "https://forms.gle/giq887BJnStoBQbj8"; 
        const INITIAL_COUNTDOWN_TIME = 404; // Phase 1 Duration
        const INVISIBLE_LIMIT_TIME = 11;    // Phase 2 Total Duration
        
        // --- State ---
        let currentPhase = 'initial'; 
        let initialTimeLeft = INITIAL_COUNTDOWN_TIME;
        let invisibleTimeLeft = INVISIBLE_LIMIT_TIME;
        let timerInterval;       

        // --- Elements ---
        const gameContainer = document.getElementById('game-container');
        const messageArea = document.getElementById('message-area');
        const timerDisplay = document.getElementById('timer-display');
        const mainText = document.getElementById('main-text');

        // --- Core Functions ---

        function closeWindow() {
            try {
                window.open('', '_self', ''); 
                window.close();
            } catch (e) {
                console.log("Close blocked.");
            }
            setTimeout(() => {
                window.location.href = "about:blank";
            }, 100);
        }

        function failGame() {
            if (currentPhase === 'ended') return;
            currentPhase = 'ended';
            
            clearInterval(timerInterval);

            gameContainer.classList.add('hidden');
            messageArea.classList.remove('hidden');

            setTimeout(() => {
                closeWindow();
            }, 2000);
        }

        function winGame() {
            if (currentPhase === 'ended') return;
            currentPhase = 'ended';
            
            clearInterval(timerInterval);
            window.location.href = SUCCESS_URL;
        }

        // --- Phase 2 Logic (Interactive Text) ---

        function startInvisibleTimer() {
            currentPhase = 'action';
            
            // Hide the explicit numeric timer
            timerDisplay.classList.add('hidden');
            
            // Inject the Puzzle Text with span wrappers
            // DO NOT T0UCH THE 0
            // Decoys: O in DO, O in NOT, 0 at end
            // Target: 0 in T0UCH
            mainText.innerHTML = `
                D<span class="interactive-char decoy">O</span> 
                N<span class="interactive-char decoy">O</span>T 
                T<span class="interactive-char target">0</span>UCH 
                THE 
                <span class="interactive-char decoy">0</span>
            `;
            
            // Add pulsing effect
            mainText.classList.add('animate-pulse');

            // Attach listeners to the new elements
            const decoys = document.querySelectorAll('.decoy');
            decoys.forEach(el => {
                el.addEventListener('click', (e) => {
                    e.stopPropagation(); // Prevent bubbling issues
                    failGame();
                });
                // Ensure touch support
                el.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    failGame();
                }, { passive: false });
            });

            const target = document.querySelector('.target');
            if (target) {
                target.addEventListener('click', (e) => {
                    e.stopPropagation();
                    winGame();
                });
                target.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    winGame();
                }, { passive: false });
            }

            // Start global timeout for Phase 2
            timerInterval = setInterval(() => {
                invisibleTimeLeft--;
                console.log("Time Left:", invisibleTimeLeft);
                
                if (invisibleTimeLeft <= 0) {
                    failGame();
                }
            }, 1000);
        }

        // --- Phase 1 Logic (Waiting) ---

        function startInitialTimer() {
            timerDisplay.textContent = initialTimeLeft;
            
            timerInterval = setInterval(() => {
                initialTimeLeft--;
                
                // Update display only if positive
                if (initialTimeLeft > 0) {
                    timerDisplay.textContent = initialTimeLeft;
                } else {
                    // Time is up -> Switch to Phase 2
                    clearInterval(timerInterval);
                    startInvisibleTimer();
                }
            }, 1000);
        }

        // --- Initialization ---
        window.addEventListener('load', () => {
            startInitialTimer();
        });

    </script>
</body>
</html>